!function(e,n,t,i){function c(){e(".fancy.select").removeClass("open")}e.extend({inherit:function(n,t,i){n.prototype=new t,n.prototype.constructor=n,e.extend(n.prototype,i)},fancyOverrides:function(n){for(var t in n)switch(t){case"FancyCheckbox":e.extend(l.prototype,n[t]);break;case"FancyRadio":e.extend(o.prototype,n[t]);break;case"FancySelect":e.extend(r.prototype,n[t])}}});var s=function(e){var n=t.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,t){return n[t]!==i?n[t]:e})},a=function(e){this.el=e},l=function(e){a.call(this,e),this.type="checkbox"},o=function(e){a.call(this,e),this.type="radio"},r=function(e){a.call(this,e),this.type="select"};a.prototype={init:function(){var e=this;e.fancify(),e.el.addClass("hidden").after(e.fel),e.bindEvents()},fancify:function(){var n=this;n.fel=e(e.parseHTML(s("<div class='fancy {0}{1}{2}'></div>",n.type,n.isDisabled()?" disabled":"",n.isChecked()?" checked":"")))},isChecked:function(){return this.el.is(":checked")},isDisabled:function(){return this.el.prop("disabled")},focus:function(){this.fel.addClass("focused")},blur:function(){this.fel.removeClass("focused")},syncChange:function(){var e=this;e.isChecked()?e.fel.addClass("checked"):e.fel.removeClass("checked")},changeValue:function(){var e=this;if(!e.isDisabled()){var n=e.el.get(0);e.el.trigger("focus"),n.checked=!n.checked,e.el.trigger("change")}},bindEvents:function(){this.nativeEvents(),this.fancyEvents()},nativeEvents:function(){var e=this;e.el.on("focus",function(){e.blurTimer===i?e.focus():clearTimeout(e.blurTimer)}),e.el.on("blur",function(){e.blurTimer=setTimeout(function(){delete e.blurTimer,e.blur()},150)}),e.el.on("change",function(){e.syncChange()})},fancyEvents:function(){var e=this;e.fel.on("click",function(){e.changeValue()})}},e.inherit(l,a),e.inherit(o,a,{getGroup:function(){return e(s("input:radio[name='{0}']",this.el.attr("name")))},syncChange:function(){this.getGroup().next().removeClass("checked"),this.fel.addClass("checked")},changeValue:function(){var e=this;e.isDisabled()||(e.el.trigger("focus"),e.getGroup().attr("checked",!1),e.el.get(0).checked=!0,e.el.trigger("change"))}}),e.inherit(r,a,{init:function(){var e=this;e.fancify(),e.el.addClass("hidden").after(e.fel).attr("size",e.el.find("option").size()),e.bindEvents()},fancify:function(){var n=this,t=s("<div class='fancy {0}{1}'>",n.type,n.isDisabled()?" disabled":"");t+=s("<span class='selected-value'>{0}</span><ul class='options'>",n.el.find(s("option[value='{0}']",n.el.val())).text()),n.el.children().each(function(){switch(this.tagName.toLowerCase()){case"option":t+=n.getOption(e(this));break;case"optgroup":var i=e(this),c=i.attr("label");t+=s("<li class='group{0}'><span class='group-label'>{1}</span><ul>",i.prop("disabled")?" disabled":"",c?c:"&nbsp;"),i.children().each(function(){t+=n.getOption(e(this))}),t+="</ul></li>"}}),t+="</ul></div>",n.fel=e(e.parseHTML(t))},getOption:function(e){return s("<li class='option{0}{1}'>{2}</li>",e.prop("disabled")?" disabled":"",e.val()===this.el.val()?" selected":"",e.text())},isOpen:function(){return this.fel.hasClass("open")},blur:function(){this.close(),this.fel.removeClass("focused")},syncChange:function(){var e=this,n=e.el.find(s("option[value='{0}']",e.el.val())).text();e.fel.children(".selected-value").text(n),e.fel.find(".option").removeClass("selected").filter(s(":contains('{0}')",n)).addClass("selected")},changeValue:function(e){this.el.val(e).trigger("change")},open:function(){this.fel.addClass("open")},close:function(){this.fel.removeClass("open")},fancyEvents:function(){var n=this;n.el.on("keydown",function(e){(13===e.which||27===e.which)&&n.close()}),n.fel.on("click",function(){n.isDisabled()||n.el.trigger("focus")}),n.fel.on("click",".selected-value",function(){n.isDisabled()||(n.isOpen()?n.close():n.open())}),n.fel.on("click",".option",function(){var t=e(this);t.hasClass("disabled")||0!==t.parents(".group.disabled").length||(n.changeValue(n.el.find(s("option:contains('{0}')",t.text())).val()),n.close())})}}),e.fn.extend({fancifyCheckbox:function(){return this.filter("input:checkbox").each(function(){new l(e(this)).init()})},fancifyRadio:function(){return this.filter("input:radio").each(function(){new o(e(this)).init()})},fancifySelect:function(){return this.filter("select").each(function(){new r(e(this)).init()})}}),e(document).on("click",function(n){0===e(n.target).parents(".fancy.select").length&&c()})}(jQuery,Object,Array);